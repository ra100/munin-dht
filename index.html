<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Munin-dht-plugin by ra100</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Munin-dht-plugin</h1>
          <h2>Munin plugin for reading temperature and humidity from DHT sensors DHT11, DHT22 and AM2302. Uses dhtreader python library.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/ra100/munin-dht-plugin/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/ra100/munin-dht-plugin/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/ra100/munin-dht-plugin" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="munin-dht-plugin" class="anchor" href="#munin-dht-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>munin-dht-plugin</h1>

<p>Munin plugin for reading temperature and humidity from DHT modules. DHT11, DHT22, AM2302. Uses dhtreader python library.</p>

<p>requires <a href="https://github.com/adafruit/Adafruit-Raspberry-Pi-Python-Code/tree/master/Adafruit_DHT_Driver_Python">Adafruit_DHT_Driver_Python</a></p>

<p>based on
<a href="https://github.com/gajdipajti/munin-rpi-temp"></a><a href="https://github.com/gajdipajti/munin-rpi-temp">https://github.com/gajdipajti/munin-rpi-temp</a>
<a href="https://github.com/agx/munin-dht"></a><a href="https://github.com/agx/munin-dht">https://github.com/agx/munin-dht</a></p>

<p>INSTALLATION</p>

<p>install Adafruit_DHT_Driver_Python driver (for prerequisities check <a href="https://github.com/adafruit/Adafruit-Raspberry-Pi-Python-Code/tree/master/Adafruit_DHT_Driver_Python">driver repository</a>)</p>

<pre><code>git clone git@github.com:adafruit/Adafruit-Raspberry-Pi-Python-Code.git
cd Adafruit-Raspberry-Pi-Python-Code/Adafruit-Raspberry-Pi-Python-Code
python setup.py build
sudo python setup.py install

cd ../..
git clone git@github.com:ra100/munin-dht-plugin.git
cd munin-dht-plugin
sudo ln -s $PWD/dht_ /etc/munin/plugins/dht_SENSORTYPE_GPIOPIN
</code></pre>

<p>USAGE</p>

<p>link dht_ to munin plugins. For DHT11 on GPIO 4 use:</p>

<pre><code>ln -s $PWD/dht_ /etc/munin/plugins/dht_11_4
</code></pre>

<p>configure munin mode, add to /etc/munin/plugin-conf.d/munin-node. You can set name of sensor, number of tries to fetch values (sometimes sensor dhtreader doesn't return values) and number of successful readings from which script counts average and removes outlier values, this should eliminate reading errors or anomalies. If you don't want to use more tries, set env.try_count to 1. If you don't want to count average, set env.average to 1. env.try_count should be greater or equal to env.average</p>

<pre><code>[dht_*]
user root

[dht_11_4]
env.where Living room
env.try_count 10
env.average 4
</code></pre>

<p>You can then check if it's working via</p>

<pre><code>sudo munin-run dht_11_4
</code></pre>

<p>Restart the munin node afterwards to get the results reported to the server:</p>

<pre><code>sudo service munin-node restart
</code></pre>
        </section>

        <footer>
          Munin-dht-plugin is maintained by <a href="https://github.com/ra100">ra100</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-18227656-5");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>